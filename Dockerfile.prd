FROM node:20

WORKDIR /usr/app

COPY package*.json ./

RUN npm install

COPY . .

ARG DB_USER
ARG DB_PASSWORD
ARG DB_DATABASE
ARG DB_PORT
ARG APP_PORT
ARG DB_HOST
ARG FRONTEND_HOST
ARG JWT_SECRET

ENV DB_USER=${DB_USER}
ENV DB_PASSWORD=${DB_PASSWORD}
ENV DB_DATABASE=${DB_DATABASE}
ENV DB_PORT=${DB_PORT}
ENV DB_HOST=${DB_HOST}
ENV FRONTEND_HOST=${FRONTEND_HOST}
ENV JWT_SECRET=${JWT_SECRET}

EXPOSE 3000

CMD ["npm", "start"]
